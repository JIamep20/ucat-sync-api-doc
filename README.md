# Документация по работе с REST API в каталоге товаров uCat #

## Содержание ##

* Назначение
* Описание
* Принцип работы с REST API
  * Типы запросов к API
  * Коды ответов
* Доступные запросы к API
  * Получить список Поставщиков
  * Получить товарных позиций Поставщика
  * Подробная информация о товарной позиции
  * Список изменившихся товарных позиций, с последнего обращения к API
  * Количество оформленных подписок в каталоге
  * Список доступных товарных позиций, на которые оформленна подписка
  * Передать статус товара в Торговой Сети
  * Загрузка файла с артикулами


## Назначение ##
[REST](https://uk.wikipedia.org/wiki/REST) [API](https://uk.wikipedia.org/wiki/Прикладний_програмний_інтерфейс) в каталоге uCat предназначен для работы с системами партнеров автоматически с доступом через web. 
Данные при работе через REST API отдаются в формате JSON. Взаимодействие с REST API идет в синхронном режиме,на каждый запрос клиент получает ответ с результатом запроса.

## Описание ##
Для доступа к данным каталога uCat, через REST API партнеру выдается *ключ доступа*. Ключ обеспечивает идентификацию клиента и определяет уровень доступа к данным.
Для того, что-бы получить ключ, нужно обратиться к администрации каталога.
Ключ представляет собой символьную строку.

### Принцып работы с REST API###
Что-бы получить информацию из каталога, нужно обратиться по определенной ссылке, с указанием параметров.
Например: Данный запрос выводит список производителей, зарегистрированных в каталоге. 
<pre>
https://client.ucat.com.ua/api-sync/v1/manufacturers?authKey=auth_key
</pre>

**Результат**

```javascript
[
  {
    name: "- Тестовый Дистрибьютор -",
    OKPO: "",
    primaryGLN: "1000000000002"
  },
  {
    name: "- Тестовый Поставщик -",
    OKPO: "1000000000",
    primaryGLN: "1000000000011"
  },
  {
    name: ""Cantine Baroncini s.r.l."",
    OKPO: null,
    primaryGLN: "8001495000003"
  },
  {
    name: ""Groupe GVG"",
    OKPO: null,
    primaryGLN: "3014296700107"
  },
  {
    name: ""LES CHAIS MOLESAN"",
    OKPO: null,
    primaryGLN: "3012112000103"
  }
]
```

**Описание частей запроса**

Параметры | Описание
--------- | ---------
https:// | Защищенный протокол передачи данных
client.ucat.com.ua/ | текущий корень каталога uCat
api-sync/ | корень приложения, отвечающего за API
v1/ | версия REST API, в приделах одной версии синтаксис запросов при обращении существенно не меняется
manufacturers | запрос на получение списка производителей
authKey | ключ доступа

###Типы запросов к API###
* GET - используется для получения информации;
* POST - используется для отправки информации в каталог;

###Коды ответов###
При запросе к каталогу веб сервер в заголовке отдает [код состояния HTTP](https://ru.wikipedia.org/wiki/Список_кодов_состояния_HTTP), вместе с телом ответа.

Код | Значение
--- | --------
200 | Код возвращается при каждом удачном обращении к API
401 | Ошибка авторизации, неправильный ключ
403 | Доступ к информации закры (но она есть в каталоге)
404 | В каталоге не найденные данные по вашему запросу

###Доступные запросы к API###
Параметры запросов
* *?authKey=<ключ_авторизации>* - Ключ добавляется к каждому запросу к API. Например https://client.ucat.com.ua/api-sync/v1/manufacturers?authKey=<ключ_авторизации>. Ключ выдается администратором.
* *GLN-номер компании* - GLN [Глобальный номер размещения](http://gs1.org.ua/uk/gs1/identificationbarcode/gln.csp), международный номер места производства выдается организацией GS1  
* *GTIN* - штрихкод товара. GTIN - Global Trade Item Number

Название | Тип | Формат | Комментарий
---------|-----|--------|------------
Поставщиков в каталоге|GET|api-sync/v1/manufacturers|Работает без подписки. Выводить поставщиков зарегистрированных в каталоге
Продукты одного поставщика|GET|api-sync/v1/manufacturers/<GLN-номер компании>/products|Выводиться список всех опубликованных в каталоге товаров поставщика
Информация об одном продукте|GET|api-sync/v1/manufacturers/<GLN-номер компании>/products/<GTIN>|Выдается информация о товаре и о его упаковках. Информация выдается в иерархическом виде. На верхнем уровне самая большая упаковка, на нижнем уровне сам товар.
Передать статус по полученному товару|POST|api-sync/v1/response|Передать в каталог uCat статус полученного товара в системе клиента.
Поиск товара по оштрихкоду|GET|api-sync/v1/products/<GTIN>/search|Поиск по товарам, которые доступны для вас в каталоге
Загрузкить файл с артикулами|POST|api-sync/v1/upload-sku|Для синхронизации асортимента, клиент может загрузить соответствие своих артикулов к штрихкодам (GTIN).
Список изменившихся товаров|GET|api-sync/v1/last-changed-gtins|Получить список товаров, которые изменились с последнего получения информации по этим товарам
Получить подписки|GET|api-sync/v1/get-count-subscribe-product|Запрос возвращает перечень подписок, которые оформил клиент.
Список GTIN базовых единиц, на которые была оформлена подписка|GET|api-sync/v1/get-subscribe-product-gtin|После оформлении подписки, клиент может проверять какие товары ему доступны по подписке